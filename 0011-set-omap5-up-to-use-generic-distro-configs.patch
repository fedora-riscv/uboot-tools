From 1db2e06693b7f1233b8568d8f2390f1c09db6e23 Mon Sep 17 00:00:00 2001
From: Dennis Gilmore <dennis@ausil.us>
Date: Mon, 2 Sep 2013 21:40:34 -0500
Subject: [PATCH 11/16] set omap5 up to use generic distro configs

---
 include/configs/omap5_common.h    | 10 +++++++---
 include/configs/ti_armv7_common.h |  3 +++
 2 files changed, 10 insertions(+), 3 deletions(-)

diff --git a/include/configs/omap5_common.h b/include/configs/omap5_common.h
index 8e82fed..dd300d7 100644
--- a/include/configs/omap5_common.h
+++ b/include/configs/omap5_common.h
@@ -68,9 +68,13 @@
 
 #define CONFIG_EXTRA_ENV_SETTINGS \
 	"loadaddr=0x82000000\0" \
+	"pxefile_addr_r=0x82000000\0" \
+	"kernel_addr_r=0x84000000\0" \
+	"ramdisk_addr_r=0x90000000\0" \
+	"fdt_addr_r=0x83000000\0" \
 	"console=" CONSOLEDEV ",115200n8\0" \
 	"fdt_high=0xffffffff\0" \
-	"fdtaddr=0x80f80000\0" \
+	"fdt_addr=0x80f80000\0" \
 	"fdtfile=undefined\0" \
 	"bootpart=0:2\0" \
 	"bootdir=/boot\0" \
@@ -96,7 +100,7 @@
 	"loadimage=load mmc ${bootpart} ${loadaddr} ${bootdir}/${bootfile}\0" \
 	"mmcboot=echo Booting from mmc${mmcdev} ...; " \
 		"run mmcargs; " \
-		"bootz ${loadaddr} - ${fdtaddr}\0" \
+		"bootz ${loadaddr} - ${fdt_addr}\0" \
 	"findfdt="\
 		"if test $board_name = omap5_uevm; then " \
 			"setenv fdtfile omap5-uevm.dtb; fi; " \
@@ -104,7 +108,7 @@
 			"setenv fdtfile dra7-evm.dtb; fi;" \
 		"if test $fdtfile = undefined; then " \
 			"echo WARNING: Could not determine device tree to use; fi; \0" \
-	"loadfdt=load mmc ${bootpart} ${fdtaddr} ${bootdir}/${fdtfile};\0" \
+	"loadfdt=load mmc ${bootpart} ${fdt_addr} ${bootdir}/${fdtfile};\0" \
 
 #define CONFIG_BOOTCOMMAND \
 	"run findfdt; " \
diff --git a/include/configs/ti_armv7_common.h b/include/configs/ti_armv7_common.h
index e0ab691..f8887a4 100644
--- a/include/configs/ti_armv7_common.h
+++ b/include/configs/ti_armv7_common.h
@@ -148,6 +148,9 @@
 #define CONFIG_CMD_ECHO
 #define CONFIG_CMD_BOOTZ
 
+/* enable generic distro config */
+#define DISTRO_DEFAULTS 1
+
 /*
  * Common filesystems support.  When we have removable storage we
  * enabled a number of useful commands and support.
-- 
1.8.3.1

