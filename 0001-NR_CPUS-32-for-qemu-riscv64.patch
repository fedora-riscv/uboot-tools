From ceae1db6e0627a3cc47f1a98fb24b01a878d4358 Mon Sep 17 00:00:00 2001
From: David Abdurachmanov <davidlt@rivosinc.com>
Date: Wed, 1 Feb 2023 15:10:36 +0200
Subject: [PATCH] NR_CPUS 32 for qemu riscv64

Support max available CPUs on U-Boot side.

Signed-off-by: David Abdurachmanov <davidlt@rivosinc.com>
---
 configs/qemu-riscv64_defconfig     | 1 +
 configs/qemu-riscv64_spl_defconfig | 1 +
 2 files changed, 2 insertions(+)

diff --git a/configs/qemu-riscv64_defconfig b/configs/qemu-riscv64_defconfig
index b55e521b..12f42eee 100644
--- a/configs/qemu-riscv64_defconfig
+++ b/configs/qemu-riscv64_defconfig
@@ -28,3 +28,4 @@ CONFIG_CMD_POWEROFF=y
 CONFIG_SYSRESET_CMD_POWEROFF=y
 CONFIG_USE_PREBOOT=y
 CONFIG_PREBOOT="cp.l ${fdtcontroladdr} ${fdt_addr_r} 0x20000;"
+CONFIG_NR_CPUS=32
diff --git a/configs/qemu-riscv64_spl_defconfig b/configs/qemu-riscv64_spl_defconfig
index 9e9f5b13..a39a878a 100644
--- a/configs/qemu-riscv64_spl_defconfig
+++ b/configs/qemu-riscv64_spl_defconfig
@@ -28,3 +28,4 @@ CONFIG_SYS_MAX_FLASH_BANKS=2
 # CONFIG_BINMAN_FDT is not set
 CONFIG_USE_PREBOOT=y
 CONFIG_PREBOOT="cp.l ${fdtcontroladdr} ${fdt_addr_r} 0x20000;"
+CONFIG_NR_CPUS=32
-- 
2.37.1

